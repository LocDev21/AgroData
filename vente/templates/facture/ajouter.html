{% extends 'base.html' %}
{% load static %}

{% block title %}Ajouter Facture{% endblock %}

{% block content %}
<div class="container">
	<div class="card p-4 mx-auto mt-4" style="max-width:700px; box-shadow: 0 2px 8px rgba(0,0,0,0.06);">
		<h1 class="h4 text-center text-success mb-4">Ajouter une Facture</h1>
		<form method="post">
			{% csrf_token %}
			<div class="mb-3">
				<label class="form-label">Vente</label>
				<select name="vente" class="form-select" required>
					<option value="">-- Choisir une vente --</option>
					{% for v in ventes %}
						<option value="{{ v.id }}">{{ v.client.nom }} {{ v.client.prenom }} — {{ v.stock.produit }}</option>
					{% empty %}
						<option value="" disabled>Aucune vente disponible</option>
					{% endfor %}
				</select>
			</div>
			<div class="mb-3">
				<label class="form-label">Numéro de facture</label>
				<input type="number" name="numero_facture" class="form-control" required>
			</div>
			<div class="mb-3">
				<label class="form-label">Date d'émission</label>
				<input type="date" name="date_emission" class="form-control">
			</div>
			<div class="mb-3">
				<label class="form-label">Montant</label>
				<input type="number" step="0.01" name="montant" class="form-control" required>
			</div>
			<div class="mb-3">
				<label class="form-label">Mode de paiement</label>
				<select name="mode_paiement" class="form-select" required>
					<option value="LIQUIDE">Liquide</option>
					<option value="OM">Orange Money</option>
					<option value="MOMO">Mobile Money</option>
					<option value="PAYCARD">Paycard</option>
				</select>
			</div>
			<div class="mb-3">
				<label class="form-label">Statut</label>
				<select name="statut" class="form-select" required>
					<option value="PAYER">Payer</option>
					<option value="ATTENTE">En Attente</option>
				</select>
			</div>

			<div class="d-grid gap-2">
				<button type="submit" class="btn btn-success">Créer la facture</button>
				<a href="{% url 'liste_factures' %}" class="btn btn-outline-secondary">Annuler</a>
			</div>
		</form>
	</div>
</div>
{% endblock %}
